# Redis-Geospatial ‚õëÔ∏è

A genius ExpressJS Application that uses Redis for highly advanced geospatial operations.  
This implementation concentrates on rescue service's need for exact location data for its vehicles and thus units.

This application was developed in the realms of a university project. It is only meant to be used as a showcase for Redis geospatial features. See the .pdf file (German) for more details on this project.
## Tech Stack ‚ö°Ô∏è

**Server:** Node, Express, Redis(RedisIO)/Redis-Cluster, FakerJS
## Run Locally üíª
The entire project can be installed using Nodes Package manager npm.  
We recommend the usage of Node 18.6.  

The project requires a locally running Redis-server in order to work properly.  
But it also supports a Redis-Cluster.

Clone the project

```bash
  git clone https://github.com/Hoffi-Flex/RedisGeospatial
```

Go to the project directory

```bash
  cd Redis-Geospatial
```

Install dependencies

```bash
  npm install
```

Start the server

```bash
  node server.js
```



## Environment Variables ‚öôÔ∏è

To run this project, you can perform the following changes to your .env file.

`REDIS_CLUSTER` Change to "true" if you want to use a Redis-cluster.

`REDIS_HOST` Your Redis host address, e.g. 127.0.0.1

`REDIS_PORT` Your Redis port, e.g. 6379

`REDIS_CLUSTER_HOST_X` If you are using a Redis-cluster, change this to a node's host address in your cluster.

`REDIS_CLUSTER_PORT_X` If you are using a Redis-cluster, change this to a corresponding node's port.

`SIM_ENABLED` If set to "true", the position simulator including the initial generation of rescue services is enabled. This happens in a separate thread.

`RESCUE_COUNT` The amount of rescue services that will be generated by the simulator.

`SIMULATON_INSTANCES` The amount of simulation instances that will be started by the simulator.

`REALISTIC_MOVEMENTS` If set to "true", the simulated movements will be in a realistic manner (50km/h). It is recommended to leave this turned off due to the performance impact this has.

`DEBUG` If set to "true", advanced debugging messages will be displayed in your console including, but not limited to, the amount of Redis mean actions per second.
## API Reference üì´

#### Get specific Rescue service

```http
  GET /rescueservice/:name
```

| Parameter | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `name` | `string` | **Required**. The exact name of the rescue service that you want to know the location of |

#### Get Rescue services in Area

```http
  GET /rescueservice/:lat/:long/:radius
```

| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `lat` | `number` | **Required**. Latitude of Search Point |
| `long` | `number` | **Required**. Longitude of Search Point |
| `radius` | `number` | **Required**. Search radius in Kilometers |

####  Create new Rescue service

```http
  POST /rescueservice
```
###  Body
```json
{
    "name":"RTW 1",
    "lat": "47.2",
    "long": "32.8"
}
```
#### Delete every Rescue service

```http
  DELETE /rescueservice
```

#### Delete specific Rescue service

```http
  DELETE /rescueservice/:name
```

| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `name` | `string` | **Required**. The exact name of the rescue service that you want to delete |

## Possible Optimizations ‚è±Ô∏è

When used in combination with a Redis-Cluster, only a single master-node will perform the writes/updates since all the geospatial data is stored in a single key that cannot be distributed among nodes. To solve this issue, one could implement a sharding mechanism like quadtrees or some other sharding algorithm that is eligible for geospatial sharding.


## Appendix üîö

This application is just a showcase for Redis and it's geospatial capabilities. It is not to be used for any production environments. The owner of this repository is in no way liable for this code.

